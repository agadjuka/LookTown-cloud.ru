# –û—Ç—á–µ—Ç –æ Deployment –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ Looktown Bot

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
**Looktown Bot** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è —Å–∞–ª–æ–Ω–∞ –∫—Ä–∞—Å–æ—Ç—ã LOOKTOWN, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º:
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å YClients API
- –û—Ç–º–µ–Ω—è—Ç—å –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∞–ª–æ–Ω–µ, —É—Å–ª—É–≥–∞—Ö –∏ –º–∞—Å—Ç–µ—Ä–∞—Ö
- –ù–∞—Ö–æ–¥–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –∑–∞–ø–∏—Å–∏

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **–Ø–∑—ã–∫:** Python 3.11
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** FastAPI (–¥–ª—è webhook-–æ–±—Ä–∞–±–æ—Ç–∫–∏)
- **Telegram SDK:** python-telegram-bot >= 21.0
- **AI/ML:** LangGraph >= 0.2.0 (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞–º–∏)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (—á–µ—Ä–µ–∑ psycopg, langgraph-checkpoint-postgres)
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:** Docker
- **–û–±–ª–∞—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Yandex Cloud Serverless Containers
- **CI/CD:** GitHub Actions

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –∫–æ–¥ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –º–æ–¥—É–ª–∏ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID
- **–ê–≥–µ–Ω—Ç—ã:** —Å–∏—Å—Ç–µ–º–∞ –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ LangGraph –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞, –ø–µ—Ä–µ–Ω–æ—Å)
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Tools):** –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å YClients API
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:** PostgreSQL –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ LangGraph Checkpointer
- **Webhook:** FastAPI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç Telegram

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `main.py` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `bot.py` ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ polling (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- `start_server.py` ‚Äî wrapper-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- `src/agents/` ‚Äî –∞–≥–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–∏–∞–ª–æ–≥–∞
- `src/graph/` ‚Äî –≥—Ä–∞—Ñ—ã LangGraph –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞–º–∏
- `src/storage/` ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (PostgreSQL)
- `src/api/webhook.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Telegram

---

## üê≥ Dockerfile

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
`Dockerfile` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)

### –û–ø–∏—Å–∞–Ω–∏–µ
```dockerfile
FROM python:3.11-slim

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1 \
    PIP_NO_CACHE_DIR=1

WORKDIR /app

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ-–º–∏–Ω–∏–º—É–º—É (–¥–ª—è ydb –∏ SSL)
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
COPY requirements.txt ./
RUN pip install -r requirements.txt

# –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
COPY bot.py ./
COPY main.py ./
COPY service_factory.py ./
COPY src ./src

# –î–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (JSON —Ñ–∞–π–ª—ã)
COPY services.json ./
COPY about_salon.json ./
COPY masters.json ./

# Wrapper —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
COPY start_server.py ./
RUN chmod +x /app/start_server.py

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ wrapper —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
# –ü–æ—Ä—Ç 8080 –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω (Yandex Cloud –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç)
CMD ["python", "/app/start_server.py"]
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑:** `python:3.11-slim` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
  - `PYTHONDONTWRITEBYTECODE=1` ‚Äî –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å .pyc —Ñ–∞–π–ª—ã
  - `PYTHONUNBUFFERED=1` ‚Äî –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ (–≤–∞–∂–Ω–æ –¥–ª—è –ª–æ–≥–æ–≤)
  - `PIP_NO_CACHE_DIR=1` ‚Äî –Ω–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å pip –ø–∞–∫–µ—Ç—ã
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** —Ç–æ–ª—å–∫–æ `ca-certificates` (–¥–ª—è SSL –∏ YDB)
- **–ö–æ–ø–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
  - –û—Å–Ω–æ–≤–Ω—ã–µ Python-—Ñ–∞–π–ª—ã: `bot.py`, `main.py`, `service_factory.py`
  - –í—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/` —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º
  - JSON-—Ñ–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏: `services.json`, `about_salon.json`, `masters.json`
  - Wrapper-—Å–∫—Ä–∏–ø—Ç: `start_server.py`
- **–ü–æ—Ä—Ç:** 8080 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–ª—è Yandex Cloud Serverless Containers)
- **–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:** —á–µ—Ä–µ–∑ wrapper-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìù .dockerignore

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
`.dockerignore` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)

### –ò—Å–∫–ª—é—á–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- **VCS:** `.git`, `.gitignore`, `.github/`
- **Python –∫—ç—à:** `__pycache__`, `*.pyc`, `.pytest_cache/`, `.mypy_cache/`
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:** `.env`, `*.env`
- **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:** `venv/`, `env/`, `.venv/`
- **–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:** `debug_logs/`, `editor/`, `dialogue_patterns.json`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `*.md`, `README.md`
- **–°–µ–∫—Ä–µ—Ç—ã:** `key.json`, `*key*.json`, `*.key`, `*.pem`
- **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:** `test_*.py`, `*_test.py`, `tests/`
- **IDE —Ñ–∞–π–ª—ã:** `.vscode/`, `.idea/`, `*.swp`
- **–õ–æ–≥–∏:** `*.log`, `logs/`
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** `tool_manager/`, `prompt_manager/`, `playground.py`
- **Docker —Ñ–∞–π–ª—ã:** `.dockerignore`, `Dockerfile`, `docker-compose.yml`

### –¶–µ–ª—å
–ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä Docker-–æ–±—Ä–∞–∑–∞, –∏—Å–∫–ª—é—á–∏–≤ –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è production.

---

## üöÄ GitHub Actions Workflow

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
`.github/workflows/deploy-to-yc.yml`

### –¢—Ä–∏–≥–≥–µ—Ä—ã
```yaml
on:
  push:
    branches:
      - master
      - main
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ –≤–µ—Ç–∫–∏ `master` –∏–ª–∏ `main`.

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

#### 1. Checkout —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```yaml
- name: Checkout repository
  uses: actions/checkout@v4
```

#### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Yandex Container Registry
```yaml
- name: Login to Yandex Container Registry
  uses: yc-actions/yc-cr-login@v1
  with:
    yc-sa-json-credentials: ${{ secrets.YC_SA_KEY }}
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ QEMU –∏ Docker Buildx
```yaml
- name: Set up QEMU
  uses: docker/setup-qemu-action@v3

- name: Set up Docker Buildx
  uses: docker/setup-buildx-action@v3
```

#### 4. –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è Docker-–æ–±—Ä–∞–∑–∞
```yaml
- name: Build and push Docker image
  uses: docker/build-push-action@v5
  with:
    context: .
    push: true
    tags: |
      cr.yandex/${{ secrets.YC_REGISTRY_ID }}/looktownbot:${{ github.sha }}
      cr.yandex/${{ secrets.YC_REGISTRY_ID }}/looktownbot:latest
    platforms: linux/amd64
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ —Ç–µ–≥–∞: —Å —Ö–µ—à–µ–º –∫–æ–º–º–∏—Ç–∞ –∏ `latest`
- –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: `linux/amd64`
- –û–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Yandex Container Registry

#### 5. –î–µ–ø–ª–æ–π –≤ Serverless Container
```yaml
- name: Deploy Serverless Container
  id: deploy
  uses: yc-actions/yc-sls-container-deploy@v1
  with:
    yc-sa-json-credentials: ${{ secrets.YC_SA_KEY }}
    container-name: 'looktownbot'
    folder-id: ${{ secrets.YANDEX_FOLDER_ID }}
    revision-image-url: cr.yandex/${{ secrets.YC_REGISTRY_ID }}/looktownbot:${{ github.sha }}
    revision-service-account-id: ${{ secrets.YANDEX_SERVICE_ACCOUNT_ID }}
    revision-memory: '512MB'
    revision-execution-timeout: 30
    revision-env: |
      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
- **–ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:** `looktownbot`
- **–ü–∞–º—è—Ç—å:** 512MB
- **–¢–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30 —Å–µ–∫—É–Ω–¥
- **Service Account:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Yandex Cloud —Ä–µ—Å—É—Ä—Å–∞–º

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –°–µ–∫—Ä–µ—Ç—ã GitHub (GitHub Secrets)
–í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub (`Settings ‚Üí Secrets and variables ‚Üí Actions`).

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è:

1. **YC_SA_KEY** ‚Äî JSON-–∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Yandex Cloud –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. **YC_REGISTRY_ID** ‚Äî ID Container Registry –≤ Yandex Cloud
3. **YANDEX_FOLDER_ID** ‚Äî ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud
4. **YANDEX_SERVICE_ACCOUNT_ID** ‚Äî ID —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (revision-env):

1. **AUTH_HEADER** ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è YClients API
2. **COMPANY_ID** ‚Äî ID –∫–æ–º–ø–∞–Ω–∏–∏ –≤ YClients
3. **DEBUG** ‚Äî —Ñ–ª–∞–≥ —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏
4. **TELEGRAM_ADMIN_GROUP_ID** ‚Äî ID –≥—Ä—É–ø–ø—ã Telegram –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
5. **TELEGRAM_BOT_TOKEN** ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
6. **YC_ACCESS_KEY_ID** ‚Äî Access Key ID –¥–ª—è Yandex Cloud
7. **YC_SECRET_ACCESS_KEY** ‚Äî Secret Access Key –¥–ª—è Yandex Cloud
8. **YANDEX_FOLDER_ID** ‚Äî ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)
9. **YC_BUCKET_NAME** ‚Äî –∏–º—è –±–∞–∫–µ—Ç–∞ –≤ Yandex Object Storage
10. **DATABASE_URL** ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (—Ñ–æ—Ä–º–∞—Ç: `postgresql://user:password@host:port/database`)
11. **API_KEY** ‚Äî API –∫–ª—é—á –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
12. **ENABLE_LLM_LOGGING** ‚Äî —Ñ–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- **WEBHOOK_URL** ‚Äî URL –¥–ª—è webhook Telegram (–µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, webhook –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)
- **WEBHOOK_PATH** ‚Äî –ø—É—Ç—å –¥–ª—è webhook (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/webhook`)
- **PORT** ‚Äî –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `8080`)
- **WEBAPP_HOST** ‚Äî —Ö–æ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.0.0.0`)

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
`requirements.txt`

### –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```
python-telegram-bot>=21.0
python-dotenv
requests
pytz
fastapi
uvicorn[standard]
langgraph>=0.2.0
pydantic>=2.0.0
aiohttp>=3.9.0
openai
pymorphy3
rapidfuzz
langgraph-checkpoint-postgres
psycopg-pool
psycopg[binary]
```

### –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **python-telegram-bot** ‚Äî SDK –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API
- **fastapi** + **uvicorn** ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∏ ASGI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è webhook
- **langgraph** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **langgraph-checkpoint-postgres** ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è LangGraph –≤ PostgreSQL
- **psycopg** ‚Äî –¥—Ä–∞–π–≤–µ—Ä PostgreSQL –¥–ª—è Python
- **openai** ‚Äî –∫–ª–∏–µ–Ω—Ç –¥–ª—è OpenAI API (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LLM)
- **pymorphy3** ‚Äî –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- **rapidfuzz** ‚Äî –±—ã—Å—Ç—Ä—ã–π fuzzy matching –¥–ª—è –ø–æ–∏—Å–∫–∞ —É—Å–ª—É–≥/–º–∞—Å—Ç–µ—Ä–æ–≤

---

## üîß start_server.py

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Wrapper-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ event loop** –¥–ª—è Windows (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
2. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏** stdout/stderr –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤
3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `main.py`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ `uvicorn`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ `main:app`
4. **–ó–∞–ø—É—Å–∫ uvicorn:**
   - –•–æ—Å—Ç: `0.0.0.0`
   - –ü–æ—Ä—Ç: `8080`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: `info` —É—Ä–æ–≤–µ–Ω—å
   - Access log: –≤–∫–ª—é—á–µ–Ω

### –í–∞–∂–Ω–æ—Å—Ç—å
–í Yandex Cloud Serverless Containers –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –≤ stdout –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏. –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∏–ø
PostgreSQL

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **LangGraph Checkpointer** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
- **–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `DATABASE_URL`
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:** —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–º. `main.py`, —Ñ—É–Ω–∫—Ü–∏—è `startup_event`)

### –§–æ—Ä–º–∞—Ç DATABASE_URL
```
postgresql://username:password@host:port/database
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü
–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `initialize_checkpointer_tables()` –∏–∑ `src/storage/checkpointer.py`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è LangGraph Checkpointer.

---

## üåê Webhook –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã FastAPI
- **GET /** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞
- **GET /health** –∏–ª–∏ **GET /healthcheck** ‚Äî health check
- **POST /webhook** ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Telegram (–ø—É—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `WEBHOOK_PATH`)
- **POST /** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—É—Ç–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
Webhook —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `WEBHOOK_URL`. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ webhook (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production).

### –§–æ—Ä–º–∞—Ç WEBHOOK_URL
```
https://your-container-url.yandexcloud.net
```

Webhook –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞: `{WEBHOOK_URL}{WEBHOOK_PATH}` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/webhook`)

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

### –§–∞–π–ª—ã, –∫–æ–ø–∏—Ä—É–µ–º—ã–µ –≤ Docker-–æ–±—Ä–∞–∑:
```
/app/
‚îú‚îÄ‚îÄ bot.py                    # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ service_factory.py        # –§–∞–±—Ä–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ start_server.py           # Wrapper-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
‚îú‚îÄ‚îÄ services.json            # –î–∞–Ω–Ω—ã–µ –æ–± —É—Å–ª—É–≥–∞—Ö
‚îú‚îÄ‚îÄ about_salon.json         # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∞–ª–æ–Ω–µ
‚îú‚îÄ‚îÄ masters.json             # –î–∞–Ω–Ω—ã–µ –æ –º–∞—Å—Ç–µ—Ä–∞—Ö
‚îî‚îÄ‚îÄ src/                     # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ agents/              # –ê–≥–µ–Ω—Ç—ã LangGraph
    ‚îú‚îÄ‚îÄ api/                 # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
    ‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ graph/               # –ì—Ä–∞—Ñ—ã LangGraph
    ‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram
    ‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    ‚îî‚îÄ‚îÄ storage/             # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

### –§–∞–π–ª—ã, –ù–ï –∫–æ–ø–∏—Ä—É–µ–º—ã–µ –≤ Docker-–æ–±—Ä–∞–∑:
- `.git/`, `.github/` ‚Äî VCS —Ñ–∞–π–ª—ã
- `__pycache__/` ‚Äî Python –∫—ç—à
- `.env` —Ñ–∞–π–ª—ã ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `venv/` ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `editor/` ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `*.md` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `logs/` ‚Äî –ª–æ–≥–∏
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è (–ø–æ—à–∞–≥–æ–≤–æ)

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ö–æ–¥ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `bot.py` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ polling (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### 2. Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ö–æ–¥ –ø—É—à–∏—Ç—Å—è –≤ –≤–µ—Ç–∫—É `master` –∏–ª–∏ `main`
- GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç workflow

### 3. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
- GitHub Actions –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥
- –ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –≤ Yandex Container Registry
- –°–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑ —Å —Ç–µ–≥–∞–º–∏:
  - `looktownbot:${{ github.sha }}` (–≤–µ—Ä—Å–∏—è —Å —Ö–µ—à–µ–º –∫–æ–º–º–∏—Ç–∞)
  - `looktownbot:latest` (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è)

### 4. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞
- –û–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Yandex Container Registry
- –î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `cr.yandex/{YC_REGISTRY_ID}/looktownbot:{tag}`

### 5. –î–µ–ø–ª–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- GitHub Actions –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—ã–π revision –≤ Serverless Container
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—Ä–∞–∑ —Å —Ö–µ—à–µ–º –∫–æ–º–º–∏—Ç–∞ (–Ω–µ `latest`)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ GitHub Secrets
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–ø–∞–º—è—Ç—å, —Ç–∞–π–º–∞—É—Ç)

### 6. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `start_server.py`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã PostgreSQL (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è FastAPI —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8080
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è webhook –≤ Telegram (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω `WEBHOOK_URL`)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –¥–µ–ø–ª–æ—è

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
1. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:** –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ GitHub Secrets –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, `DATABASE_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º
3. **–ü–æ—Ä—Ç:** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–ª—É—à–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É `8080` (Yandex Cloud –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç)
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –≤—Å–µ –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –≤ stdout –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è `start_server.py`)
5. **Webhook:** –¥–ª—è production –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–¥–∞–Ω `WEBHOOK_URL`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health check: `GET https://your-container-url/health`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ Yandex Cloud Console
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (—á–µ—Ä–µ–∑ Telegram Bot API –∏–ª–∏ –ª–æ–≥–∏)
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç—É

### –û—Ç–∫–∞—Ç –≤–µ—Ä—Å–∏–∏:
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é:
1. –ù–∞–π—Ç–∏ —Ö–µ—à –∫–æ–º–º–∏—Ç–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏
2. –í—Ä—É—á–Ω—É—é –¥–µ–ø–ª–æ–∏—Ç—å –æ–±—Ä–∞–∑ —Å —ç—Ç–∏–º —Ö–µ—à–µ–º —á–µ—Ä–µ–∑ Yandex Cloud Console –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å workflow –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ–≥–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Yandex Cloud Console ‚Üí Serverless Containers ‚Üí looktownbot ‚Üí –õ–æ–≥–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç: `/health` –∏–ª–∏ `/healthcheck`

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ—è
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Yandex Cloud Serverless Containers
- **–†–µ–≥–∏—Å—Ç—Ä –æ–±—Ä–∞–∑–æ–≤:** Yandex Container Registry
- **CI/CD:** GitHub Actions
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (–≤–Ω–µ—à–Ω—è—è, –Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** Yandex Object Storage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ `YC_BUCKET_NAME`)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Serverless Containers
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø–ª–∞—Ç–∞ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–ª—É—à–∞—Ç—å –Ω–∞ 8080)
- –õ–æ–≥–∏ –≤ stdout/stderr –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ Cloud Logging

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ GitHub Secrets
- Service Account –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Yandex Cloud —Ä–µ—Å—É—Ä—Å–∞–º
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `revision-env` (–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±—Ä–∞–∑–µ)
- `.env` —Ñ–∞–π–ª—ã –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ Docker-–æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ `.dockerignore`

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Yandex Cloud Serverless Containers:** [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://cloud.yandex.ru/docs/serverless-containers/)
- **Yandex Container Registry:** [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://cloud.yandex.ru/docs/container-registry/)
- **GitHub Actions –¥–ª—è Yandex Cloud:** [yc-actions](https://github.com/yandex-cloud/github-actions)
- **LangGraph:** [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://langchain-ai.github.io/langgraph/)
- **FastAPI:** [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://fastapi.tiangolo.com/)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞:** 2024  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 0.1.0  
**–°—Ç–∞—Ç—É—Å:** Production Ready



